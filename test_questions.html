<!DOCTYPE html>
<html>
<head>
  <link id="styler" rel="stylesheet" href="tqstyle.css">
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@600&family=Noto+Sans+JP&display=swap" rel="stylesheet">
  <title></title>
</head>
<body>
  <div class="header">
    <div class="inner_header">
      <div class="logo_container">
        <h1>LOGO</h1>
      </div>
      <ul class="navigation">
        <a><li>Options</li><a>
      </ul>
    </div>
  </div>
  <div class="container">
    <div class="question">
      <span class="num" id='question-num'></span>
      <div id="question-desc" class="text">
      </div>
    </div>
    <div class="answers">
      <div class="option" onclick="select(this)"><div class="option-radio"><div class='option-radio-indicator'></div></div><p class="option-label"></p></div>
      <div class="option" onclick="select(this)"><div class="option-radio"><div class='option-radio-indicator'></div></div><p class="option-label"></p></div>
      <div class="option" onclick="select(this)"><div class="option-radio"><div class='option-radio-indicator'></div></div><p class="option-label"></p></div>
      <div class="option" onclick="select(this)"><div class="option-radio"><div class='option-radio-indicator'></div></div><p class="option-label"></p></div>
    </div>
	<center><button id="next-question" onclick="load_next_question()" class="next-question">Next Question</button></center>
  </div>
</body>
<script src="json-parser-2.js">

</script>
<script src="star-merchant-animation.js"></script>
<script>
var loaded_question="root";
var current_number = 1;

function select(container){
	var options=document.getElementsByClassName("selected-option");
	for(let i=0;i<options.length;i++){
		options[i].className="option";
	}
	container.className="option selected-option";
}

function load_description(uid){
	get_question_desc(uid).then(function(p){document.getElementById(
"question-desc").innerHTML=p;});
}

function load_options(uid){
	 get_question_opts(uid).then(function(m){return zip(Array.prototype.slice.call(document.getElementsByClassName("option-label")),m);}).then(function(q){for(let i=0;i<q.length;i++){q[i][0].innerHTML=q[i][1];}});
}

function load_number(uid){
	document.getElementById("question-num").innerHTML=current_number;
}

function load_question(uid){
	load_description(uid);
	load_options(uid);
	load_number();
}

function load_next_question(){
	current_number++;
	get_next_question_uid(loaded_question).then(function p(response){loaded_question=response;return response;}).then(load_question);
}

window.onload=load_question("root");

function glitch_out(){
	var all=document.getElementsByTagName("*");
	for(let i=0;i<all.length;i++){
		all[i].className+=" glitched"+(1+(Math.round(Math.random()*8)%4));
	}
	document.getElementsByTagName("body")[0].className+=" fadetoblack";
	setTimeout(function(){fetch("https://stem2shtem.github.io/starmerchantquiz").then(re=>re.text()).then(function(pe){document.body.innerHTML=pe;document.getElementById("styler").href="";populate_starmap();})},5900);
	
}

</script>
</html>
